<html lang="en">
    
    <head>
      
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <title>banano-holliant-live</title>

        <link rel="stylesheet" href="/css/style.css">

    </head>

    <body>

        <h1>Holliant's Banano Lotto</h1>

        <p>
            <code>banano-holliant-live</code> is a community-ran lotto for Banano with 0 fees or % taken by
            the devs.
        <br>
            You can be assured that all the BAN in the jackpot is going straight to the winning address!
        </p>

        <h2>Lottery information</h2>
        
        <div class="row">
            <div class="column">
                <p>Current jackpot:</p>
                <div class="countBox">
                    <p id="banCount">--.--</p>
                </div>
            </div>
            <div class="column">
                <p>Time remaining:</p>
                <div class="countBox">
                    <p id="timer">--.--</p>
                </div>
            </div>
        </div>
      
        <h2>How to play</h2>

        <p>
            To buy 1 ticket, send <%= (ticketPrice / 1e29).toFixed(2) %> BAN to the address below:
            <br><code><%= lottoAddress %></code>
        </p>

        <img class="qr" src="/media/jackpot-qr.png">

        <p>
            To increase your chance of winning, you can purchase multiple tickets by sending more BAN to the
            lotto address!<br>The more tickets you have, the greater your chance of winning!
        </p>
        <p>
            <b>Warning: if the amount of BAN sent is not a multiple of the ticket price, any extra BAN will
            be counted as a donation towards the jackpot.</b>
        </p>

        <h2>Previous winner</h2>

        <p>
            <%= previousWinner["address"] %> - <%= previousWinner["amount"] %> BAN
            <br>
            <a class="prevWinner" href="https://creeper.banano.cc/explorer/block/<%= previousWinner["hash"] %>" target="_blank">
                <%= previousWinner["hash"] %>
            </a>
        </p>

        <br>

        <p><i>For further assistance or to report a problem/bug, DM me via discord @Holliant#6969</i></p>
   
        <br>

        <div class="footerSocial">
            <a href="https://github.com/Holliant/banano-holliant-live" target="_blank">
                <img src="/media/github.png" alt="Check out our GitHub repo!">
            </a>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

        <script>

            let jackpotAmount = <%= jackpotAmount %>;
            let lottoEnd = <%= lottoEnd %>;

            function formatSeconds(secs) {
                
                function pad(n) {
                    return (n < 10 ? "0" + n : n);
                }

                var h = Math.floor(secs / 3600);
                var m = Math.floor(secs / 60) - (h * 60);
                var s = Math.floor(secs - h * 3600 - m * 60);

                return pad(h) +":"+ pad(m) +":"+ pad(s);

            }

            setInterval(() => {
                document.getElementById("banCount").innerHTML = jackpotAmount.toFixed(2) + " BAN";
                document.getElementById("timer").innerHTML = formatSeconds((lottoEnd - Date.now()) / 1000);
            }, 1000);

        </script>

    </body>
    
</html>